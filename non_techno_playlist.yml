version: 1

placeholder_values: {}

general:
  name: Non Techno Playlist
  timezone: Europe/Berlin
  instructions: >
    You are a radio host for Swift Radio, a radio station that plays non techno music.
    Generate engaging content that sounds natural when read aloud by AI voice.
  model: gpt-4
  temperature: 0.7
  max_tokens: 900
  seed: 42
  voice_style: natural
  sections_path_local: "/Volumes/share.nas.home/martin/MP3s/Swift Radio/Non-Techno/"
  placeholder_values: {}

providers:
  - type: LLM
    config:
      provider_name: OpenAI
      api_key: ${OPENAI_API_KEY}
      admin_api_key: ${OPENAI_ADMIN_KEY}

  - type: TTS
    config:
      provider_name: OpenAI
      api_key: ${OPENAI_API_KEY}
      model: gpt-4o-mini-tts
      voice: alloy

  - type: MUSIC
    config:
      provider_name: MusicAssistant
      base_url: https://ma.nas.home/
      verify_ssl: false
      api_key: ${MUSIC_ASSISTANT_API_KEY}
      playlist_id: 7
      provider_instance_id_or_domain: library
      sections_provider_instance: filesystem_local--MhvbAKbD
      sections_provider_domain: filesystem_local
      sections_rescan_timeout_seconds: 180
      sections_rescan_poll_seconds: 5

sections:
  - id: Song_Introduction_Start
    type: ai_text
    prompt: >
      This is the first song of the playlist, <next_songinfo>. Introduce the song and the artist
      in a way that captures attention and sets the tone for the playlist.
    constraints:
      max_chars: 650

  - id: Song_Introduction_Middle
    type: ai_text
    prompt: >
      Introduce the next song, <next_songinfo>, in a short and engaging way.
      Include artist and song details and keep it interesting.
    constraints:
      max_chars: 650

  - id: Song_Introduction_End
    type: ai_text
    prompt: >
      This is the last song of the playlist, <next_songinfo>. Introduce it in a way
      that leaves a lasting impression and invites listeners back.
    constraints:
      max_chars: 650

  - id: Song_Transition
    type: ai_text
    prompt: >
      Create a smooth transition between <prev_songinfo> and <next_songinfo>.
      Mention both songs and artists in a connected way.
    constraints:
      max_chars: 600

  - id: Weather_Short
    type: ai_text
    prompt: >
      Give a short listener-friendly weather update for the next few hours based on <weather_hourly>.
      Mention current local time <timestamp>.
    constraints:
      max_chars: 500

  - id: News_Headlines_Short
    type: ai_text
    prompt: >
      Read a short neutral headline roundup with local, national, and international focus.
      Use <news_headlines_local>, <news_headlines_national>, and <news_headlines_international>.
    constraints:
      max_chars: 700

section_order:
  - when: start_of_playlist
    flow:
      - MUST: Song_Introduction_Start

  - when: between_songs
    flow:
      - ALTERNATIVE:
          pick: one
          choices:
            - section: Song_Transition
              weight: 55
            - section: Song_Introduction_Middle
              weight: 45
      - OPTIONAL:
          section: Weather_Short
          chance: 0.22
          guards:
            min_gap_songs: 3
            max_per_60min: 2
            require_placeholders_present: ["<weather_hourly>", "<timestamp>"]
      - OPTIONAL:
          section: News_Headlines_Short
          chance: 0.10
          guards:
            min_gap_songs: 6
            max_per_60min: 1
            require_placeholders_present: ["<news_headlines_local>", "<news_headlines_national>", "<news_headlines_international>"]

  - when: end_of_playlist
    flow:
      - MUST: Song_Introduction_End

validation:
  strict: true
