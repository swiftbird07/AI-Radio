version: 1

general:
  name: Non Techno Playlist
  description: Non-techno music playlist with AI voice host segments for Swift Radio
  language: en-US
  timezone: Europe/Berlin
  voice_style: natural
  # Prepended to EVERY generated segment prompt
  instructions: >
    You are a radio host for Swift Radio, a radio station that plays non techno music.
    Your task is to generate engaging and informative content for the listeners based
    on the prompts provided. Next you will see the prompt for the specific section
    you need to generate content for. Respond in a way that it can be read aloud by
    an AI voice. Make sure to keep the content engaging and informative for the listeners.
  # AI tuning
  model: gpt-4
  temperature: 0.7
  max_tokens: 900
  # Where the generated sections should be stored (relative to the output directory)
  sections_path: ./sections 

providers:
  - type: LLM
    config:
      provider_name: OpenAI
      api_key: ${OPENAI_API_KEY}
  - type: TTS
    config:
      provider_name: OpenAI
      api_key: ${OPENAI_API_KEY}
  - type: MUSIC
    config:
      provider_name: MusicAssistant
      base_url: https://ma.nas.home/
      verify_ssl: false
      api_key: ${MUSIC_ASSISTANT_API_KEY}
      playlist_id: 12345678-90ab-cdef-1234-567890abcdef

available_placeholders:
    - <prev_songinfo>
    - <next_songinfo>
    - <very_next_songinfo>
    - <weather_hourly>
    - <weather_daily>
    - <news_headlines_local>
    - <news_headlines_national>
    - <news_headlines_international>
    - <timestamp>

sections:
  # Song segments
  - id: Song_Introduction_Start
    type: ai_text
    description: Intro for the first track of the playlist
    prompt: >
      This is the first song of the playlist, <next_songinfo>. Introduce the song and the artist
      in a way that captures the listeners' attention and sets the tone for the rest of the playlist.
    constraints:
      max_chars: 650

  - id: Song_Introduction_Middle
    type: ai_text
    description: Intro for a track somewhere in the middle of the playlist
    prompt: >
      Introduce the next song, <next_songinfo>, in a short and engaging way. Include information
      about the artist and the song, and make it sound interesting for the listeners.
    constraints:
      max_chars: 650

  - id: Song_Introduction_End
    type: ai_text
    description: Intro for the last track of the playlist
    prompt: >
      This is the last song of the playlist, <next_songinfo>. Introduce the song and the artist
      in a way that leaves a lasting impression on the listeners and encourages them to listen to more music on Swift Radio.
    constraints:
      max_chars: 650

  - id: Song_Transition
    type: ai_text
    description: Transition between previous and next track
    prompt: >
      Create a smooth transition between the previous song, <prev_songinfo>, and the next song, <next_songinfo>.
      Mention the artists and the songs in a way that connects them and keeps the listeners engaged.
    constraints:
      max_chars: 600

  # Utility segments (optional inserts)
  - id: Weather_Short
    type: ai_text
    description: Short weather update (avoid sounding like a forecast app)
    prompt: >
      Give a short, listener-friendly weather update for the next few hours based on <weather_hourly>.
      Keep it brief, practical, and read-aloud friendly. Mention the current local time <timestamp>.
    constraints:
      max_chars: 500

  - id: News_Headlines_Short
    type: ai_text
    description: Short neutral headline roundup
    prompt: >
      Read a short roundup of headlines. Prefer local first, then national, then international.
      Use: <news_headlines_local>, <news_headlines_national>, <news_headlines_international>.
      Keep it neutral, no opinions, no sensationalism, read-aloud friendly, and brief.
    constraints:
      max_chars: 700

section_order:
  # The generator should evaluate these rules at specific insertion points.
  # Supported insertion points are intentionally generic so your future script can map them easily.
  - when: start_of_playlist
    flow:
      - MUST: Song_Introduction_Start

  - when: between_songs
    # This is the core "middle" rule: ALWAYS exactly one of the alternatives
    flow:
      - ALTERNATIVE:
          pick: one
          choices:
            - section: Song_Transition
              weight: 55
            - section: Song_Introduction_Middle
              weight: 45

      # Optional inserts that can happen after the chosen song talk
      - OPTIONAL:
          section: Weather_Short
          chance: 0.22
          guards:
            min_gap_songs: 3
            max_per_60min: 2
            require_placeholders_present: ["<weather_hourly>", "<timestamp>"]

      - OPTIONAL:
          section: News_Headlines_Short
          chance: 0.10
          guards:
            min_gap_songs: 6
            max_per_60min: 1
            require_placeholders_present: ["<news_headlines_local>", "<news_headlines_national>", "<news_headlines_international>"]

  - when: end_of_playlist
    flow:
      - MUST: Song_Introduction_End

validation:
  # Fail fast if the config references unknown sections or unsupported keywords.
  strict: true
  allow_unused_sections: true